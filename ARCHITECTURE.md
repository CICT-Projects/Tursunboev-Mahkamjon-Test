# ğŸ—ï¸ ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°

## ğŸ“Š Ğ”Ğ¸Ğ°Ğ³Ñ€Ğ°Ğ¼Ğ¼Ğ° Ğ²Ğ·Ğ°Ğ¸Ğ¼Ğ¾Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Ğ’ĞµĞ±-Ğ±Ñ€Ğ°ÑƒĞ·ĞµÑ€ (Frontend)                       â”‚
â”‚                    http://localhost:3000                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                        React Application                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”‚  App.js          â”‚  â”‚  Components/     â”‚  â”‚  Styles/         â”‚
â”‚  â”‚  - State         â”‚  â”‚  - CarList       â”‚  â”‚  - *.css         â”‚
â”‚  â”‚  - API calls     â”‚  â”‚  - CarCard       â”‚  â”‚  - Styling       â”‚
â”‚  â”‚  - Handlers      â”‚  â”‚  - AddCarForm    â”‚  â”‚  - Layout        â”‚
â”‚  â”‚                  â”‚  â”‚  - AddPartForm   â”‚  â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â†•
                            HTTP/REST
                      (JSON format requests)
                               â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Backend Server (API)                           â”‚
â”‚                    http://localhost:5000                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                  C# ASP.NET Core Web API                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”‚  Controllers/    â”‚  â”‚  Models/         â”‚  â”‚  Data/           â”‚
â”‚  â”‚  - CarsCtrlr    â”‚  â”‚  - Car.cs        â”‚  â”‚  - AppDbContext  â”‚
â”‚  â”‚  - PartsCtrlr   â”‚  â”‚  - Part.cs       â”‚  â”‚  - Migrations    â”‚
â”‚  â”‚  - Routing      â”‚  â”‚  - Properties    â”‚  â”‚  - EF Core       â”‚
â”‚  â”‚  - Validation   â”‚  â”‚  - Relationships â”‚  â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                                                                    â”‚
â”‚              Program.cs (Configuration)                           â”‚
â”‚              - CORS Setup                                         â”‚
â”‚              - Dependency Injection                               â”‚
â”‚              - Database Connection                                â”‚
â”‚              - Middleware Setup                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â†•
                            SQL Queries
                      (CREATE, READ, UPDATE, DELETE)
                               â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Database (SQLite)                             â”‚
â”‚                        cars.db                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚   Cars Table        â”‚      â”‚   Parts Table       â”‚            â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤            â”‚
â”‚  â”‚ Id (PK)            â”‚      â”‚ Id (PK)             â”‚            â”‚
â”‚  â”‚ Name               â”‚      â”‚ Name                â”‚            â”‚
â”‚  â”‚ Brand              â”‚      â”‚ Price               â”‚            â”‚
â”‚  â”‚ Year               â”‚      â”‚ Type                â”‚            â”‚
â”‚  â”‚ Price              â”‚      â”‚ CarId (FK) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â†’         â”‚
â”‚  â”‚ CreatedAt          â”‚      â”‚ CreatedAt           â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                                                    â”‚
â”‚  One Car â”€â”€â†’ Many Parts (One-to-Many relationship)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ ĞŸĞ¾Ñ‚Ğ¾Ğº Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

### Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ¾Ğ±Ğ¸Ğ»Ñ

```
1. User fills form in React
   â†“
2. Click "Add Car" button
   â†“
3. fetch POST /api/cars with JSON {name, brand, year, price}
   â†“
4. Backend receives in CarsController
   â†“
5. Create Car object with auto-generated Id
   â†“
6. Add to DbContext and SaveChangesAsync()
   â†“
7. Database: INSERT INTO Cars (Name, Brand, Year, Price) VALUES (...)
   â†“
8. Return Car object with Id to React (201 Created)
   â†“
9. React adds to state.cars and re-renders
   â†“
10. Car appears in the list
```

### ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ğ¼Ğ°ÑˆĞ¸Ğ½

```
1. useEffect() on App.js mount
   â†“
2. fetch GET /api/cars
   â†“
3. Backend CarsController.GetCars()
   â†“
4. DbContext.Cars.Include(c => c.Parts)
   â†“
5. Database: SELECT * FROM Cars INNER JOIN Parts
   â†“
6. Return array of Cars with their Parts
   â†“
7. React setCars(data)
   â†“
8. Page renders with all cars and their parts
```

### Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ·Ğ°Ğ¿Ñ‡Ğ°ÑÑ‚Ğ¸

```
1. User fills part form and clicks "Add"
   â†“
2. fetch POST /api/parts with {name, price, type, carId}
   â†“
3. Backend PartsController.PostPart()
   â†“
4. Verify Car with carId exists
   â†“
5. Create Part object
   â†“
6. Add to DbContext and SaveChangesAsync()
   â†“
7. Database: INSERT INTO Parts (Name, Price, Type, CarId)
   â†“
8. Return Part object to React
   â†“
9. React adds part to car.parts array
   â†“
10. Part appears under the car
```

## ğŸ“ Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²

### Backend ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ°

```
backend/
â”œâ”€â”€ Models/
â”‚   â”œâ”€â”€ Car.cs              # Car entity
â”‚   â””â”€â”€ Part.cs             # Part entity
â”‚
â”œâ”€â”€ Data/
â”‚   â”œâ”€â”€ AppDbContext.cs     # DbContext configuration
â”‚   â””â”€â”€ [Migrations]/       # Auto-generated migrations (ĞµÑĞ»Ğ¸ Ğ½ÑƒĞ¶Ğ½Ñ‹)
â”‚
â”œâ”€â”€ Controllers/
â”‚   â”œâ”€â”€ CarsController.cs   # GET, POST, PUT, DELETE for Cars
â”‚   â””â”€â”€ PartsController.cs  # GET, POST, PUT, DELETE for Parts
â”‚
â”œâ”€â”€ Program.cs              # App configuration & startup
â”œâ”€â”€ backend.csproj          # Project file with NuGet packages
â”‚
â”œâ”€â”€ appsettings.json        # App settings
â”œâ”€â”€ appsettings.Development.json
â”‚
â”œâ”€â”€ bin/                    # Compiled output
â”‚   â””â”€â”€ Debug/
â”‚       â””â”€â”€ net10.0/
â”‚           â”œâ”€â”€ backend.dll
â”‚           â”œâ”€â”€ cars.db     # SQLite database â† Ğ­Ğ¢Ğ Ğ’ĞĞ–ĞĞ!
â”‚           â””â”€â”€ [other files]
â”‚
â””â”€â”€ obj/                    # Intermediate compilation files
```

### Frontend ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ°

```
frontend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ AddCarForm.js     # Form for adding cars
â”‚   â”‚   â”œâ”€â”€ AddPartForm.js    # Form for adding parts
â”‚   â”‚   â”œâ”€â”€ CarCard.js        # Single car card with parts
â”‚   â”‚   â””â”€â”€ CarList.js        # Grid of car cards
â”‚   â”‚
â”‚   â”œâ”€â”€ styles/
â”‚   â”‚   â”œâ”€â”€ AddCarForm.css    # Styles for car form
â”‚   â”‚   â”œâ”€â”€ AddPartForm.css   # Styles for part form
â”‚   â”‚   â”œâ”€â”€ CarCard.css       # Styles for car card
â”‚   â”‚   â””â”€â”€ CarList.css       # Styles for car list
â”‚   â”‚
â”‚   â”œâ”€â”€ App.js               # Main component (state, API calls)
â”‚   â”œâ”€â”€ App.css              # Main styles
â”‚   â”œâ”€â”€ index.js             # React entry point
â”‚   â””â”€â”€ index.css            # Global styles
â”‚
â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ index.html           # HTML template
â”‚   â””â”€â”€ manifest.json
â”‚
â”œâ”€â”€ package.json             # Dependencies & scripts
â”œâ”€â”€ .env                     # Environment variables
â””â”€â”€ node_modules/            # Installed packages
```

## ğŸ”— Relationships (ĞœĞ¾Ğ´ĞµĞ»Ğ¸)

### Car Model
```csharp
public class Car
{
    public int Id { get; set; }                      // Primary Key
    public string Name { get; set; }                 // e.g. "BMW X5"
    public string Brand { get; set; }                // e.g. "BMW"
    public int Year { get; set; }                    // e.g. 2023
    public decimal Price { get; set; }               // e.g. 5000000
    public DateTime CreatedAt { get; set; }          // Auto-timestamp
    
    // One-to-Many: One Car has Many Parts
    public ICollection<Part> Parts { get; set; }     // Related parts
}
```

### Part Model
```csharp
public class Part
{
    public int Id { get; set; }                      // Primary Key
    public string Name { get; set; }                 // e.g. "Oil Filter"
    public decimal Price { get; set; }               // e.g. 5000
    public string Type { get; set; }                 // e.g. "engine"
    public DateTime CreatedAt { get; set; }          // Auto-timestamp
    
    // Many-to-One: Many Parts belong to One Car
    public int CarId { get; set; }                   // Foreign Key
    public Car Car { get; set; }                     // Navigation property
}
```

## ğŸŒŠ Data Flow Lifecycle

### Initial Load (Page Refresh)
```
1. React Component mounted
2. useEffect hook triggers
3. Fetch all cars with parts: GET /api/cars
4. Receive JSON array with cars and nested parts
5. setState(cars)
6. Component re-renders with data
7. Page displays all cars and parts
```

### Add Car
```
1. Form submit event
2. Validation check
3. POST /api/cars with car data
4. Backend saves to database
5. Receive created car object with Id
6. Add to local state
7. Form clears
8. List updates with new car
```

### Add Part to Car
```
1. Form submit event
2. POST /api/parts with part data + carId
3. Backend validates car exists
4. Saves to database
5. Receive part object with Id
6. Find car in state by carId
7. Add part to car.parts array
8. Component re-renders
9. Part visible under car
```

### Delete
```
1. Click delete button
2. Confirmation dialog
3. DELETE /api/cars/{id} or /api/parts/{id}
4. Backend removes from database
5. Receive 204 No Content
6. Remove from local state
7. Component re-renders
8. Item disappears from list
```

## ğŸ” Entity Framework Relationships

```csharp
// In AppDbContext.OnModelCreating():

modelBuilder.Entity<Car>()
    .HasMany(c => c.Parts)           // One Car
    .WithOne(p => p.Car)             // Many Parts
    .HasForeignKey(p => p.CarId)     // Foreign Key
    .OnDelete(DeleteBehavior.Cascade); // If car deleted â†’ parts deleted
```

**Ğ­Ñ‚Ğ¾ Ğ¾Ğ·Ğ½Ğ°Ñ‡Ğ°ĞµÑ‚:**
- ĞšĞ¾Ğ³Ğ´Ğ° ÑƒĞ´Ğ°Ğ»ÑĞµÑ‚ÑÑ Car â†’ Ğ²ÑĞµ ĞµĞ³Ğ¾ Parts Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ ÑƒĞ´Ğ°Ğ»ÑÑÑ‚ÑÑ
- ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ Part Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ¿Ñ€Ğ¸Ğ½Ğ°Ğ´Ğ»ĞµĞ¶Ğ°Ñ‚ÑŒ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ¾Ğ´Ğ½Ğ¾Ğ¼Ñƒ Car
- ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ Car Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ¸Ğ¼ĞµÑ‚ÑŒ Ğ¼Ğ½Ğ¾Ğ³Ğ¾ Parts

## ğŸ’¾ Database Schema

### Cars Table
```sql
CREATE TABLE [Cars] (
    [Id]        INTEGER PRIMARY KEY AUTOINCREMENT,
    [Name]      TEXT NOT NULL,
    [Brand]     TEXT NOT NULL,
    [Year]      INTEGER NOT NULL,
    [Price]     DECIMAL(18, 2) NOT NULL,
    [CreatedAt] DATETIME2 NOT NULL
);
```

### Parts Table
```sql
CREATE TABLE [Parts] (
    [Id]        INTEGER PRIMARY KEY AUTOINCREMENT,
    [Name]      TEXT NOT NULL,
    [Price]     DECIMAL(18, 2) NOT NULL,
    [Type]      TEXT NOT NULL,
    [CarId]     INTEGER NOT NULL,
    [CreatedAt] DATETIME2 NOT NULL,
    FOREIGN KEY ([CarId]) REFERENCES [Cars]([Id]) ON DELETE CASCADE
);
```

## ğŸ”Œ API Request/Response Flow

### Request Example: Add Car
```
POST /api/cars HTTP/1.1
Host: localhost:5000
Content-Type: application/json
Content-Length: 67

{"name":"BMW X5","brand":"BMW","year":2023,"price":5000000}
```

### Response Example
```
HTTP/1.1 201 Created
Content-Type: application/json
Content-Length: 142

{
  "id":1,
  "name":"BMW X5",
  "brand":"BMW",
  "year":2023,
  "price":5000000,
  "createdAt":"2024-12-29T10:30:00Z",
  "parts":[]
}
```

## ğŸ¯ Component Hierarchy

```
App (Main component with state)
â”œâ”€â”€ Header (Title & description)
â”œâ”€â”€ Error message (if any)
â”œâ”€â”€ AddCarForm (Form to add cars)
â””â”€â”€ CarList (Grid of cars)
    â””â”€â”€ CarCard (For each car)
        â”œâ”€â”€ Car header (Name, Brand, Year)
        â”œâ”€â”€ Car price
        â”œâ”€â”€ Parts section
        â”‚   â”œâ”€â”€ Part list
        â”‚   â”‚   â””â”€â”€ PartItem (For each part)
        â”‚   â”‚       â”œâ”€â”€ Part name
        â”‚   â”‚       â”œâ”€â”€ Part type
        â”‚   â”‚       â””â”€â”€ Delete button
        â”‚   â”œâ”€â”€ Total parts price
        â”‚   â””â”€â”€ "Add part" button
        â””â”€â”€ AddPartForm (Form to add parts - conditional)
```

## ğŸ”„ State Management

All state is in `App.js`:
- `cars` - Array of car objects with their parts
- `loading` - Boolean for loading state
- `error` - String for error message

State is updated only through:
- `setCars()` - Update cars array
- `setLoading()` - Update loading state
- `setError()` - Update error message

No Redux or Context needed - simple and effective!

## ğŸš€ Performance Considerations

1. **Lazy loading** - All cars loaded once on mount
2. **Optimistic updates** - UI updates immediately, server validates
3. **Error handling** - User sees error messages
4. **Database indexing** - FK on CarId automatically indexed
5. **Cascade delete** - Efficient cleanup of related data

---

**This architecture ensures**:
- âœ… Clean separation of concerns
- âœ… Scalable design
- âœ… Easy to add features
- âœ… Type-safe (C#)
- âœ… Responsive UI (React)
- âœ… Persistent data (SQLite)
